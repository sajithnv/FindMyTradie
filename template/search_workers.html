{% include 'nav.html' %}
{% load static%}
{% block content %}

<head>

    <style>
        form {
            /* padding-left:40%; */
            text-align: center;
        }

        #product_id,
        #id_e_name,
        #id_phone_number,
        #id_e_img,
        #id_address,
        #id_location,
        #id_service_name,
        #id_certificate_img,
        #id_available {
            color: #ffc107;
            background: transparent;
        }

        bold {
            color: aqua;
        }

        .align {
            margin-left: 2%;
        }

        option {
            color: black;
        }
    </style>

</head>

<body>
    <div class="payment div-style" style="min-height:500px">
        <a href="../">
            <svg style='position:absolute;' xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#ffc107" class="bi bi-house-door-fill mt-4" viewBox="0 0 16 16">
                <path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5Z"/>
              </svg>
        </a>
        <h1 style="color: #ffc107">Search Workers</h1>
        <hr>
        <hr><br>
        <form action="{% url 'mainApp1:searchWorkers1'%}">
            <!-- <input type="text" name="trade_name" id="product_id"> -->
            <select name="trade_name" id="id_service_name">
                <option value="" selected="">Trade Name</option>
                <option value="0">Plumber</option>
                <option value="1">Painter</option>
                <option value="2">Electrician</option>
                <option value="3">Carpender</option>
                <option value="4">Welder</option>
                <option value="5">TV Technician</option>
                <option value="6">Refrigerator Technician</option>
                <option value="7">Motor Technician</option>
                <option value="8">Coconut Climber</option>
                <option value="9">Gardener</option>
            </select>

            <!-- <input type="text" name="location_name" id="product_id"> -->
            <select name="location_name" id="id_location">
                <option value="" selected="">Location</option>
                <option value="0">Kanhangad</option>
                <option value="1">Kasaragod</option>
                <option value="2">Kenjar</option>
                <option value="3">Bajpe</option>
                <option value="4">Mangalore</option>
                <option value="5">Payyanoor</option>
                <option value="6">Sulliya</option>
                <option value="7">Kannur</option>
                <option value="8">Kozhikode</option>
                <option value="9">Kollam</option>
                <option value="10">Kottayam</option>
                <option value="11">Thiruvanathapuram</option>
            </select>
            <input type="submit" value="Search" class="btn btn-info btn-sm mb-1">
        </form>
        <hr>

        <div style="max-height: 46%; overflow: auto;">
            <div class="row m-3">
                {% for i in workers_data1 %}
                <div class="card m-3 col-md-6"
                    style="max-width: 47%;background-color: transparent;border: solid white 2px;">
                    <div class="row g-0 overflow-auto">
                        <div class="mt-3 col-md-4 ">
                            <img src="../{{i.e_img}}" class="img-fluid rounded"
                                style="width: 100%;height: 170px;border: solid #ffc107 2px;" alt="Employee Image">
                        </div>
                        <div class="col-md-8">
                            {% if user.is_superuser %}
                            <a href="{% url 'mainApp1:profit2' i.e_name %}" title="Profit By {{i.e_name}}.">
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#ffc107" class="bi bi-currency-rupee mt-4 me-4 float-end" viewBox="0 0 16 16">
                                    <path d="M4 3.06h2.726c1.22 0 2.12.575 2.325 1.724H4v1.051h5.051C8.855 7.001 8 7.558 6.788 7.558H4v1.317L8.437 14h2.11L6.095 8.884h.855c2.316-.018 3.465-1.476 3.688-3.049H12V4.784h-1.345c-.08-.778-.357-1.335-.793-1.732H12V2H4v1.06Z"/>
                                  </svg>
                            </a>
                            {% endif %}
                            <div class="card-body">
                                {% if i.verified %}
                                <h4 class="card-title" style="color: #ffc107;">{{i.e_name}}
                                    <span class="top-0 start-100 translate-middle badge rounded-pill bg-transparent">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" fill="#25cff2"
                                            class="bi bi-patch-check-fill" viewBox="0 0 16 16">
                                            <path
                                                d="M10.067.87a2.89 2.89 0 0 0-4.134 0l-.622.638-.89-.011a2.89 2.89 0 0 0-2.924 2.924l.01.89-.636.622a2.89 2.89 0 0 0 0 4.134l.637.622-.011.89a2.89 2.89 0 0 0 2.924 2.924l.89-.01.622.636a2.89 2.89 0 0 0 4.134 0l.622-.637.89.011a2.89 2.89 0 0 0 2.924-2.924l-.01-.89.636-.622a2.89 2.89 0 0 0 0-4.134l-.637-.622.011-.89a2.89 2.89 0 0 0-2.924-2.924l-.89.01-.622-.636zm.287 5.984-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708.708z" />
                                        </svg>
                                        <span class="visually-hidden">unread messages</span>
                                    </span>
                                </h4>
                                {% else %}
                                <h4 class="card-title" style="color: #ffc107;">{{i.e_name}}</h4>
                                {% endif %}
                                {% if based_on1 == 'both' %}
                                <!-- SEARCH RESULT BASED ON BOTH TRADE AND LOCATION -->
                                <p class="card-text" style="border: 2px solid #25cff2">Location :<bold>
                                        {{i.get_location_display}}</bold>
                                <p>
                                <p class="card-text" style="border: 2px solid #25cff2">Trade :<bold>
                                        {{i.get_service_name_display}}</bold>
                                <p>
                                {% elif based_on1 == 'trade' %}
                                <!-- TRADE BASED SEARCH RESULT -->
                                <p class="card-text">Location :<bold> {{i.get_location_display}}</bold>
                                <p>
                                <p class="card-text" style="border: 2px solid #25cff2">Trade :<bold>
                                        {{i.get_service_name_display}}</bold>
                                <p>
                                {% elif based_on1 == 'location' %}
                                    <!-- LOCATION BASED SEARCH RESULT -->
                                <p class="card-text" style="border: 2px solid #25cff2">Location :<bold>
                                        {{i.get_location_display}}</bold>
                                <p>
                                <p class="card-text">Trade :<bold> {{i.get_service_name_display}}</bold>
                                <p>
                                {% else %}
                                <p class="card-text">Location :<bold> {{i.get_location_display}}</bold>
                                <p>
                                <p class="card-text">Trade :<bold> {{i.get_service_name_display}}</bold>
                                <p>
                                    {% endif %}
                                    {% if i.available %}
                                <h6 class="card-text" title="ON-Duty / Available." >Status : <bold class="bg-success fw-bolder ps-2 pe-2 rounded-pill">ON
                                        DUTY</bold>
                                </h6>
                                {% else %}
                                <h6 class="card-text" title="OFF-Duty / Unavailable." >Status : <bold class="bg-danger fw-bolder ps-2 pe-2 rounded-pill">OFF
                                        DUTY</bold>
                                </h6>
                                {% endif %}
                                <a href='{% url "mainApp1:empProfileByUser1" i.e_name %}'><input type="button"
                                        class="btn btn-info btn-sm" value="View Profile"></a>
                                {% if user.is_superuser %}
                                    {% if i.verified %}
                                    <a href='{% url "mainApp1:demote1" i.e_name %}'><input type="button" class="btn btn-danger btn-sm ms-1" value="Demote"></a>
                                    {% else %}
                                    <a href='{% url "mainApp1:promote1" i.e_name %}'><input type="button" class="btn btn-success btn-sm  ms-1" value="Promote"></a>
                                    {% endif %}
                                    <a href="../{{i.certificate_img}}" target="_blank" ><input type="button" class="btn btn-info btn-sm  ms-1" value="View Proof"></a>
                                {% elif i.available %}
                                <a href='{% url "mainApp1:confirmRequest1" i.e_name %}'><input type="button" class="btn btn-warning btn-sm" value="Confirm Request"></a>
                                {% else %}
                                <input type="button" class="btn btn-secondary disabled btn-sm" value="Unavailable">
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
                {% for i in workers_data2 %}
                <div class="card m-3 col-md-6"
                    style="max-width: 47%;background-color: transparent;border: solid white 2px;">
                    <div class="row g-0 overflow-auto">
                        <div class="mt-3 col-md-4">
                            <img src="../{{i.e_img}}" class="img-fluid rounded"
                                style="width: 100%;height: 170px;border: solid #ffc107 2px;" alt="Employee Image">
                        </div>
                        <div class="col-md-8">
                            {% if user.is_superuser %}
                            <a href="{% url 'mainApp1:profit2' i.e_name %}" title="Profit By {{i.e_name}}.">
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="#ffc107" class="bi bi-currency-rupee mt-4 me-4 float-end" viewBox="0 0 16 16">
                                    <path d="M4 3.06h2.726c1.22 0 2.12.575 2.325 1.724H4v1.051h5.051C8.855 7.001 8 7.558 6.788 7.558H4v1.317L8.437 14h2.11L6.095 8.884h.855c2.316-.018 3.465-1.476 3.688-3.049H12V4.784h-1.345c-.08-.778-.357-1.335-.793-1.732H12V2H4v1.06Z"/>
                                  </svg>
                            </a>
                            {% endif %}
                            <div class="card-body">
                                {% if i.verified %}
                                <h4 class="card-title" style="color: #ffc107;">{{i.e_name}}
                                    <span class="top-0 start-100 translate-middle badge rounded-pill bg-transparent">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" fill="#25cff2"
                                            class="bi bi-patch-check-fill" viewBox="0 0 16 16">
                                            <path
                                                d="M10.067.87a2.89 2.89 0 0 0-4.134 0l-.622.638-.89-.011a2.89 2.89 0 0 0-2.924 2.924l.01.89-.636.622a2.89 2.89 0 0 0 0 4.134l.637.622-.011.89a2.89 2.89 0 0 0 2.924 2.924l.89-.01.622.636a2.89 2.89 0 0 0 4.134 0l.622-.637.89.011a2.89 2.89 0 0 0 2.924-2.924l-.01-.89.636-.622a2.89 2.89 0 0 0 0-4.134l-.637-.622.011-.89a2.89 2.89 0 0 0-2.924-2.924l-.89.01-.622-.636zm.287 5.984-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708.708z" />
                                        </svg>
                                        <span class="visually-hidden">unread messages</span>
                                    </span>
                                </h4>
                                {% else %}
                                <h4 class="card-title" style="color: #ffc107;">{{i.e_name}}</h4>
                                {% endif %}
                                {% if based_on1 == 'both' %}
                                <!-- SEARCH RESULT BASED ON BOTH TRADE AND LOCATION -->
                                <p class="card-text" style="border: 2px solid #25cff2">Location :<bold>
                                        {{i.get_location_display}}</bold>
                                <p>
                                <p class="card-text" style="border: 2px solid #25cff2">Trade :<bold>
                                        {{i.get_service_name_display}}</bold>
                                <p>
                                {% elif based_on1 == 'trade' %}
                                <!-- TRADE BASED SEARCH RESULT -->
                                <p class="card-text">Location :<bold> {{i.get_location_display}}</bold>
                                <p>
                                <p class="card-text" style="border: 2px solid #25cff2">Trade :<bold>
                                        {{i.get_service_name_display}}</bold>
                                <p>
                                {% elif based_on1 == 'location' %}
                                    <!-- LOCATION BASED SEARCH RESULT -->
                                <p class="card-text" style="border: 2px solid #25cff2">Location :<bold>
                                        {{i.get_location_display}}</bold>
                                <p>
                                <p class="card-text">Trade :<bold> {{i.get_service_name_display}}</bold>
                                <p>
                                {% else %}
                                <p class="card-text">Location :<bold> {{i.get_location_display}}</bold>
                                <p>
                                <p class="card-text">Trade :<bold> {{i.get_service_name_display}}</bold>
                                <p>
                                {% endif %}
                                {% if i.available %}
                                <h6 class="card-text" title="On-Duty / Available." >Status : <bold class="bg-success fw-bolder ps-2 pe-2 rounded-pill">ON DUTY</bold></h6>
                                {% else %}
                                <h6 class="card-text" title="OFF-Duty / Unavailable.">Status : <bold class="bg-danger fw-bolder ps-2 pe-2 rounded-pill">OFF
                                        DUTY</bold>
                                </h6>
                                {% endif %}
                                <a href='{% url "mainApp1:empProfileByUser1" i.e_name %}'><input type="button"
                                        class="btn btn-info btn-sm" value="View Profile"></a>
                                {% if user.is_superuser %}
                                    {% if i.verified %}
                                    <a href='{% url "mainApp1:demote1" i.e_name %}'><input type="button" class="btn btn-danger btn-sm ms-1" value="Demote"></a>
                                    {% else %}
                                    <a href='{% url "mainApp1:promote1" i.e_name %}'><input type="button" class="btn btn-success btn-sm  ms-1" value="Promote"></a>
                                    {% endif %}
                                    <a href="../{{i.certificate_img}}" target="_blank" ><input type="button" class="btn btn-info btn-sm  ms-1" value="View Proof"></a>
                                {% elif i.available %}
                                <a href="https://wa.me/+91 {{i.phone_number}}?text=Hello {{i.e_name}}.. You have received a new request." target="_blank">
                                <a href='{% url "mainApp1:confirmRequest1" i.e_name %}'><input type="button" class="btn btn-warning btn-sm" value="Confirm Request"></a></a>
                                {% else %}
                                <input type="button" class="btn btn-secondary disabled btn-sm" value="Unavailable">
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
                {% if not workers_data1 and not workers_data2 %}
                <div class="p-5"><h2 class="w3-text-red">SEARCH NOT FOUND!!!</h2>Try again with <bold>nearby Locations</bold> ...</div>
                {% endif %}
            </div>
        </div>
    </div>
</body>
{% endblock %}